<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gaming Platform - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/admin.css">
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <div class="logo">üõ°Ô∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</div>
            <ul class="nav-links">
                <li><a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="/dashboard" class="nav-link">–ü–∞–Ω–µ–ª—å</a></li>
                <li><a href="/admin" class="nav-link active">–ê–¥–º–∏–Ω</a></li>
            </ul>
            <div class="nav-auth" id="navAuth">
                <span id="adminName" class="admin-name"></span>
                <button onclick="gamePlatform.logout()" class="glass-button">–í—ã–π—Ç–∏</button>
            </div>
        </nav>
    </header>

    <main class="admin-main">
        <div class="container">
            <!-- Admin Page Content Only -->
            <div id="admin-page" class="min-h-screen py-12 px-6">
                <div class="max-w-7xl mx-auto">
                    <div class="flex justify-between items-center mb-8">
                        <h1 class="text-4xl font-bold">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                        <div class="flex space-x-4">
                            <select id="status-filter" class="glass rounded-lg px-4 py-2 bg-dark-700 text-white">
                                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="pending">–û–∂–∏–¥–∞–µ—Ç</option>
                                <option value="approved">–û–¥–æ–±—Ä–µ–Ω–æ</option>
                                <option value="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</option>
                            </select>
                            <select id="category-filter" class="glass rounded-lg px-4 py-2 bg-dark-700 text-white">
                                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                                <option value="gold-kill">–ì–æ–ª–¥ –∫–∏–ª–ª</option>
                                <option value="victory">–ü–æ–±–µ–¥–∞</option>
                                <option value="funny">–°–º–µ—à–Ω–æ–π –º–æ–º–µ–Ω—Ç</option>
                                <option value="skill">–°–∫–∏–ª–ª</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-xl p-6">
                            <div class="text-3xl font-bold text-blue-400">24</div>
                            <div class="text-gray-400">–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫</div>
                        </div>
                        <div class="glass rounded-xl p-6">
                            <div class="text-3xl font-bold text-yellow-400">8</div>
                            <div class="text-gray-400">–û–∂–∏–¥–∞—é—Ç</div>
                        </div>
                        <div class="glass rounded-xl p-6">
                            <div class="text-3xl font-bold text-green-400">12</div>
                            <div class="text-gray-400">–û–¥–æ–±—Ä–µ–Ω–æ</div>
                        </div>
                        <div class="glass rounded-xl p-6">
                            <div class="text-3xl font-bold text-red-400">4</div>
                            <div class="text-gray-400">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</div>
                        </div>
                    </div>
                    <div class="glass rounded-2xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-dark-700">
                                    <tr>
                                        <th class="px-6 py-4 text-left">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                        <th class="px-6 py-4 text-left">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                        <th class="px-6 py-4 text-left">–î–∞—Ç–∞</th>
                                        <th class="px-6 py-4 text-left">–°—Ç–∞—Ç—É—Å</th>
                                        <th class="px-6 py-4 text-left">–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="applications-table" class="divide-y divide-gray-700">
                                    <tr class="hover:bg-dark-700/50 transition-colors">
                                        <td class="px-6 py-4">
                                            <div class="flex items-center space-x-3">
                                                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-sm font-bold">
                                                    GU
                                                </div>
                                                <span>GameUser123</span>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400">
                                                üèÜ –ì–æ–ª–¥ –∫–∏–ª–ª
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 text-gray-400">2024-01-15</td>
                                        <td class="px-6 py-4">
                                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400">
                                                –û–∂–∏–¥–∞–µ—Ç
                                            </span>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="flex space-x-2">
                                                <button onclick="viewApplication(1)" class="text-blue-400 hover:text-blue-300 transition-colors">
                                                    –ü—Ä–æ—Å–º–æ—Ç—Ä
                                                </button>
                                                <button onclick="approveApplication(1)" class="text-green-400 hover:text-green-300 transition-colors">
                                                    –û–¥–æ–±—Ä–∏—Ç—å
                                                </button>
                                                <button onclick="rejectApplication(1)" class="text-red-400 hover:text-red-300 transition-colors">
                                                    –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Submission Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 class="modal-title">–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏</h2>
                <button class="modal-close" onclick="gamePlatform.closeModal('reviewModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="reviewContent">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- User Edit Modal -->
    <div id="userEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                <button class="modal-close" onclick="gamePlatform.closeModal('userEditModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userEditForm" class="form">
                    <input type="hidden" id="editUserId" name="userId">
                    
                    <div class="form-group">
                        <label class="form-label">–ù–∏–∫–Ω–µ–π–º</label>
                        <input type="text" id="editUserNickname" class="form-input" readonly>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editUserRole">–†–æ–ª—å</label>
                        <select id="editUserRole" name="role" class="form-select">
                            <option value="USER">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                            <option value="MODERATOR">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                            <option value="ADMIN">–ê–¥–º–∏–Ω</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editUserBalance">–ë–∞–ª–∞–Ω—Å</label>
                        <input type="number" id="editUserBalance" name="balance" class="form-input" 
                               step="0.01" min="0" max="100000">
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editUserBanned" name="isBanned">
                            <span>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="gamePlatform.closeModal('userEditModal')">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button type="button" class="btn btn-primary" onclick="adminPanel.saveUserChanges()">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- Add Balance Modal -->
    <div id="addBalanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å</h2>
                <button class="modal-close" onclick="gamePlatform.closeModal('addBalanceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addBalanceForm" class="form">
                    <input type="hidden" id="balanceUserId" name="userId">
                    
                    <div class="form-group">
                        <label class="form-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                        <input type="text" id="balanceUserNickname" class="form-input" readonly>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="balanceAmount">–°—É–º–º–∞ *</label>
                        <input type="number" id="balanceAmount" name="amount" class="form-input" 
                               step="0.01" min="0.01" max="10000" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="balanceReason">–ü—Ä–∏—á–∏–Ω–∞ *</label>
                        <textarea id="balanceReason" name="reason" class="form-input form-textarea" 
                                  required placeholder="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞" maxlength="200"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="gamePlatform.closeModal('addBalanceModal')">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button type="button" class="btn btn-primary" onclick="adminPanel.addUserBalance()">
                    –î–æ–±–∞–≤–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- Bulk Reject Modal -->
    <div id="bulkRejectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–ú–∞—Å—Å–æ–≤–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ</h2>
                <button class="modal-close" onclick="gamePlatform.closeModal('bulkRejectModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bulkRejectForm" class="form">
                    <div class="form-group">
                        <label class="form-label" for="bulkRejectReason">–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è *</label>
                        <textarea id="bulkRejectReason" name="reason" class="form-input form-textarea" 
                                  required placeholder="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫" maxlength="200"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="gamePlatform.closeModal('bulkRejectModal')">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button type="button" class="btn btn-danger" onclick="adminPanel.confirmBulkReject()">
                    –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫–∏
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="successToast" class="toast toast-success hidden">
        <div class="toast-content">
            <span class="toast-icon">‚úÖ</span>
            <span class="toast-message"></span>
        </div>
    </div>

    <div id="errorToast" class="toast toast-error hidden">
        <div class="toast-content">
            <span class="toast-icon">‚ùå</span>
            <span class="toast-message"></span>
        </div>
    </div>

    <script src="scripts/main.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/admin.js"></script>
</body>
</html>